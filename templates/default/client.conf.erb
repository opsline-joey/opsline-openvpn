# OpenVPN client configuration file
# Generated by Chef - local changes will be overwritten!

# Please refer to the OpenVPN documentation for details on
# configuration settings.

client
dev tun
proto <%= node['openvpn']['config']['proto'] %>
remote <%= node['openvpn']['gateway'] %> <%= node['openvpn']['config']['port'] %>
resolv-retry infinite
nobind
persist-key
persist-tun
ca ca.crt
cert <%= @username %>.crt
key <%= @username %>.key
comp-lzo
verb 3
<% if node['opsline-openvpn']['tls_key'] -%>
tls-auth <%= node['opsline-openvpn']['tls_key'] %> 1
<% end -%>
<% if node['opsline-openvpn']['mfa']['enabled'] -%>
reneg-sec <%= node['opsline-openvpn']['mfa']['reneg-sec'] %>
auth-user-pass
<% end -%>
